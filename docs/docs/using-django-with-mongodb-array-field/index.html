<!DOCTYPE html><html lang="en" class="no-js" data-beasties-container><head>
  <meta charset="UTF-8">
  <title>Using Djongo Array Model Field</title>
  <meta name="description" content="Djongo is a smarter approach to database querying. It maps python objects to MongoDB documents. It is popularly referred to as an Object Document Mapper or ODM. It is an extension to the traditional Django object relational modeling framework. Use Django Admin to directly add and modify documents stored in MongoDB. Use other contrib modules such as Auth and Sessions without any changes.">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="en_US">
  <meta property="og:site_name" content="Djongomapper">
  <meta property="og:title" content="Djongo">
  <meta property="og:url" content="https://www.djongomapper.com/">
  <meta property="og:description" content="Djongo is a smarter approach to database querying. It maps python objects to MongoDB documents. It is popularly referred to as an Object Document Mapper or ODM. It is an extension to the traditional Django object relational modeling framework. Use Django Admin to directly add and modify documents stored in MongoDB. Use other contrib modules such as Auth and Sessions without any changes.">
  <link rel="canonical" href="https://www.djongomapper.com/">
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Doableware",
      "url": "https://www.djongomapper.com/",
      "logo": "/assets/images/djongo-symbol-small.png"
    }
  </script>
  <meta name="google-site-verification" content="tFNu7Nc9hzKF9v7f6kYaoMbBCNyGREchcKMVdxJuyJo">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
    document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  </script>
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
  </noscript>
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/custom.css">
  <link rel="shortcut icon" href="/assets/images/favicon.ico">
  <script async src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script async src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
  <!--<script async src="/assets/js/cookie-consent.js"></script>-->

  <script>
    if (window.location.hostname != 'localhost') {
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
                    'gtm.start':
                      new Date().getTime(), event: 'gtm.js'
                  });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-T72KG6N');
    }
  </script>

  <base href="/">
<style>html{scroll-behavior:smooth}
</style><link rel="stylesheet" href="styles-TPMX36DN.css" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles-TPMX36DN.css"></noscript><style ng-app-id="ng">.body[_ngcontent-ng-c3825049082]{display:grid;grid-template-columns:minmax(min-content,calc(300px - 1rem)) minmax(256px,1280px) minmax(min-content,calc(300px - 1rem));grid-template-rows:calc(100vh - 3rem) auto;justify-content:center;gap:1rem;padding-left:1rem;padding-right:1rem}.body[_ngcontent-ng-c3825049082] > div[_ngcontent-ng-c3825049082]{grid-row:1/-1}.body[_ngcontent-ng-c3825049082] > aside[_ngcontent-ng-c3825049082]{grid-row:1}.nav[_ngcontent-ng-c3825049082]{padding-top:1rem;padding-bottom:1rem;font-size:.7rem}.nav-sticky[_ngcontent-ng-c3825049082]{position:sticky;top:3rem;overflow:auto}.nav-side[_ngcontent-ng-c3825049082]   h3[_ngcontent-ng-c3825049082]{font-size:.7rem;opacity:.7;text-transform:uppercase;border-bottom:1px solid #f2f3f3;margin:.5rem 0;padding:.25rem 0}.nav-side[_ngcontent-ng-c3825049082]   a[_ngcontent-ng-c3825049082]{color:inherit;opacity:.7}.nav-side[_ngcontent-ng-c3825049082]   .active[_ngcontent-ng-c3825049082]{font-weight:700;opacity:1}.nav-side[_ngcontent-ng-c3825049082]   a[_ngcontent-ng-c3825049082]:hover{opacity:1}.nav-toc[_ngcontent-ng-c3825049082]   h3[_ngcontent-ng-c3825049082]{font-size:.75rem;font-weight:700;color:#fff;background:#6f777d;border-top-left-radius:4px;border-top-right-radius:4px;padding:.5rem .75rem;margin:0}.nav-toc[_ngcontent-ng-c3825049082]   a[_ngcontent-ng-c3825049082]{display:block;padding:.25rem .75rem;color:#646769;font-weight:700;line-height:1.5;border-bottom:1px solid #f2f3f3;border-left:1px solid #f2f3f3;border-right:1px solid #f2f3f3}.nav-toc[_ngcontent-ng-c3825049082]   a[_ngcontent-ng-c3825049082]:hover{text-decoration:underline}.nav-toc[_ngcontent-ng-c3825049082]   li[_ngcontent-ng-c3825049082]   li[_ngcontent-ng-c3825049082] > a[_ngcontent-ng-c3825049082]{font-weight:400;padding-left:1rem}.nav-toc[_ngcontent-ng-c3825049082]   .active[_ngcontent-ng-c3825049082]{background-color:#e2e4e5}.sidebar[_ngcontent-ng-c3825049082]{opacity:1}.sidebar[_ngcontent-ng-c3825049082]   li[_ngcontent-ng-c3825049082]{font-size:.7rem}.page__content[_ngcontent-ng-c3825049082]{margin-top:1em}</style><style ng-app-id="ng">.close[_ngcontent-ng-c3552946287]{height:0;transition:height 2s}.mast[_ngcontent-ng-c3552946287]{position:sticky;top:0;padding:.5em 0;z-index:1;background:#fff;border-bottom:1px solid #f2f3f3}.mast[_ngcontent-ng-c3552946287] > div[_ngcontent-ng-c3552946287]{margin:0 auto;max-width:1280px;display:flex;flex-direction:row;justify-content:space-between}.mast[_ngcontent-ng-c3552946287]   a[_ngcontent-ng-c3552946287]{display:block;color:#6f777d;text-decoration:none}.mast[_ngcontent-ng-c3552946287]   .mast-logo[_ngcontent-ng-c3552946287]{display:flex}.mast[_ngcontent-ng-c3552946287]   .mast-nav[_ngcontent-ng-c3552946287]   ul[_ngcontent-ng-c3552946287]{display:flex;align-items:center}.mast[_ngcontent-ng-c3552946287]   .mast-nav[_ngcontent-ng-c3552946287]   ul.media-small[_ngcontent-ng-c3552946287]{flex-direction:column}.mast[_ngcontent-ng-c3552946287]   .mast-nav[_ngcontent-ng-c3552946287]   a[_ngcontent-ng-c3552946287]{margin:0 .75rem}.mast[_ngcontent-ng-c3552946287]   .mast-nav[_ngcontent-ng-c3552946287]   .nav-link[_ngcontent-ng-c3552946287]{position:relative}.mast[_ngcontent-ng-c3552946287]   .mast-nav[_ngcontent-ng-c3552946287]   .nav-link[_ngcontent-ng-c3552946287]:hover:after{width:100%}.mast[_ngcontent-ng-c3552946287]   .mast-nav[_ngcontent-ng-c3552946287]   .nav-link[_ngcontent-ng-c3552946287]:after{content:"";position:absolute;left:50%;bottom:0;transform:translate(-50%);width:0;height:4px;background-color:#6f777d;transition:width .2s ease-in-out}.mast[_ngcontent-ng-c3552946287]   .mast-nav[_ngcontent-ng-c3552946287]   .nav-btn[_ngcontent-ng-c3552946287]{padding:.5em 1em;font-size:.75em;font-weight:700;text-align:center;border-width:0;border-radius:4px;color:#fff}.mast[_ngcontent-ng-c3552946287]   .mast-nav[_ngcontent-ng-c3552946287]   .btn-red[_ngcontent-ng-c3552946287]{background-color:#ee5f5b}.mast[_ngcontent-ng-c3552946287]   .mast-nav[_ngcontent-ng-c3552946287]   .btn-red[_ngcontent-ng-c3552946287]:hover{background-color:#b2231f}</style><style ng-app-id="ng">.media-small[_ngcontent-ng-c2376829457]{position:fixed;top:3rem;left:0;padding:0 1rem;background:#fff;height:100vh}.cross[_ngcontent-ng-c2376829457]{margin:.6rem 0}.cross[_ngcontent-ng-c2376829457]:hover{cursor:pointer}.cross[_ngcontent-ng-c2376829457] > div[_ngcontent-ng-c2376829457]{background:#000;height:1px;width:1.2rem}.cross[_ngcontent-ng-c2376829457] > div[_ngcontent-ng-c2376829457]:nth-child(1){transform:translateY(1px) rotate(45deg)}.cross[_ngcontent-ng-c2376829457] > div[_ngcontent-ng-c2376829457]:nth-child(2){transform:rotate(-45deg)}.open[_ngcontent-ng-c2376829457]{transition:width .4s}.close[_ngcontent-ng-c2376829457]{width:0;padding:0;overflow:hidden;transition:width .3s}</style></head>
<body><!--nghm--><script type="text/javascript" id="ng-event-dispatch-contract">(()=>{function p(t,n,r,o,e,i,f,m){return{eventType:t,event:n,targetElement:r,eic:o,timeStamp:e,eia:i,eirp:f,eiack:m}}function u(t){let n=[],r=e=>{n.push(e)};return{c:t,q:n,et:[],etc:[],d:r,h:e=>{r(p(e.type,e,e.target,t,Date.now()))}}}function s(t,n,r){for(let o=0;o<n.length;o++){let e=n[o];(r?t.etc:t.et).push(e),t.c.addEventListener(e,t.h,r)}}function c(t,n,r,o,e=window){let i=u(t);e._ejsas||(e._ejsas={}),e._ejsas[n]=i,s(i,r),s(i,o,!0)}window.__jsaction_bootstrap=c;})();
</script><script>window.__jsaction_bootstrap(document.body,"ng",["click"],[]);</script>
<app-root ng-version="19.2.0" ngh="4" ng-server-context="ssg"><router-outlet></router-outlet><ng-component _nghost-ng-c3825049082 ngh="3"><app-body _ngcontent-ng-c3825049082 _nghost-ng-c3552946287 ngh="0"><div _ngcontent-ng-c3552946287 class="layout--splash"><div _ngcontent-ng-c3552946287 class="mast"><div _ngcontent-ng-c3552946287><div _ngcontent-ng-c3552946287 class="mast-logo"><a _ngcontent-ng-c3552946287 href="/" class="site-logo"><img _ngcontent-ng-c3552946287 src="/assets/images/djongo-symbol-small.png" alt="Djongo"></a></div><div _ngcontent-ng-c3552946287 class="mast-nav"><nav _ngcontent-ng-c3552946287><ul _ngcontent-ng-c3552946287><li _ngcontent-ng-c3552946287><a _ngcontent-ng-c3552946287 class="btn-red nav-btn" href="/djongocs/login" jsaction="click:;">Login</a></li><li _ngcontent-ng-c3552946287><a _ngcontent-ng-c3552946287 class="btn--primary nav-btn" href="/djongocs/contact-us" jsaction="click:;">Contact Us</a></li><li _ngcontent-ng-c3552946287><a _ngcontent-ng-c3552946287 class="nav-link" href="/app-development" jsaction="click:;">Services</a></li><li _ngcontent-ng-c3552946287><a _ngcontent-ng-c3552946287 class="nav-link" href="/products" jsaction="click:;">Products</a></li><li _ngcontent-ng-c3552946287><a _ngcontent-ng-c3552946287 class="nav-link" href="/docs/get-started" jsaction="click:;">Docs</a></li><!----></ul></nav></div></div></div><div _ngcontent-ng-c3552946287 class="initial-content"><div _ngcontent-ng-c3825049082 class="body"><aside _ngcontent-ng-c3825049082 class="nav-sticky"><app-nav _ngcontent-ng-c3825049082 _nghost-ng-c2376829457 ngh="1"><!----><nav _ngcontent-ng-c3825049082 class="nav nav-side"><ul _ngcontent-ng-c3825049082><li _ngcontent-ng-c3825049082><h3 _ngcontent-ng-c3825049082>Djongo</h3><ul _ngcontent-ng-c3825049082><li _ngcontent-ng-c3825049082><a _ngcontent-ng-c3825049082 routerlinkactive="active" href="/docs/get-started" class jsaction="click:;"> Get Started </a></li><li _ngcontent-ng-c3825049082><a _ngcontent-ng-c3825049082 routerlinkactive="active" href="/docs/integrating-django-with-mongodb" class jsaction="click:;"> Django with MongoDB </a></li><li _ngcontent-ng-c3825049082><a _ngcontent-ng-c3825049082 routerlinkactive="active" href="/docs/using-django-with-mongodb-data-fields" class jsaction="click:;"> Embedded Field </a></li><li _ngcontent-ng-c3825049082><a _ngcontent-ng-c3825049082 routerlinkactive="active" href="/docs/using-django-with-mongodb-array-field" class="active" jsaction="click:;"> Array Field </a></li><li _ngcontent-ng-c3825049082><a _ngcontent-ng-c3825049082 routerlinkactive="active" href="/docs/using-django-with-mongodb-array-reference-field" class jsaction="click:;"> Array Reference Field </a></li><li _ngcontent-ng-c3825049082><a _ngcontent-ng-c3825049082 routerlinkactive="active" href="/docs/using-django-with-other-fields" class jsaction="click:;"> Other Fields </a></li><!----></ul></li><li _ngcontent-ng-c3825049082><h3 _ngcontent-ng-c3825049082>DjongoCS</h3><ul _ngcontent-ng-c3825049082><li _ngcontent-ng-c3825049082><a _ngcontent-ng-c3825049082 routerlinkactive="active" href="/docs/indexes" class jsaction="click:;"> Indexes </a></li><li _ngcontent-ng-c3825049082><a _ngcontent-ng-c3825049082 routerlinkactive="active" href="/docs/model-query" class jsaction="click:;"> Model Query </a></li><li _ngcontent-ng-c3825049082><a _ngcontent-ng-c3825049082 routerlinkactive="active" href="/docs/model-creation" class jsaction="click:;"> Model Creation </a></li><li _ngcontent-ng-c3825049082><a _ngcontent-ng-c3825049082 routerlinkactive="active" href="/docs/model-update" class jsaction="click:;"> Model Update </a></li><li _ngcontent-ng-c3825049082><a _ngcontent-ng-c3825049082 routerlinkactive="active" href="/docs/database-transactions" class jsaction="click:;"> Database Transactions </a></li><!----></ul></li><li _ngcontent-ng-c3825049082><h3 _ngcontent-ng-c3825049082>Side Stuff</h3><ul _ngcontent-ng-c3825049082><li _ngcontent-ng-c3825049082><a _ngcontent-ng-c3825049082 routerlinkactive="active" href="/docs/djongo-comparison" class jsaction="click:;"> Djongo vs Others </a></li><li _ngcontent-ng-c3825049082><a _ngcontent-ng-c3825049082 routerlinkactive="active" href="/docs/django-mongodb-connector-design-document" class jsaction="click:;"> Djongo Design </a></li><!----></ul></li><!----></ul></nav><!----><!----><!----></app-nav></aside><div _ngcontent-ng-c3825049082 class="page__content"><header _ngcontent-ng-c3825049082><h1 _ngcontent-ng-c3825049082 class="page__title">Using Djongo Array Model Field</h1></header><router-outlet _ngcontent-ng-c3825049082></router-outlet><ng-component ngh="2"><h2 id="arrayfield">ArrayField</h2><p>With Djongo there can be an <a href="https://docs.mongodb.com/manual/core/document/#arrays">array</a> of embedded documents inside the parent document. You can create an <strong>embed array/list of models inside the parent model</strong> and store it directly into MongoDB.</p><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ArrayField</span><span class="p">(</span><span class="n">MongoField</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">model_container</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">Model</span><span class="p">],</span>
                 <span class="n">model_form_class</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">model_form_kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</code></pre></div><h3 id="arguments">Arguments</h3><table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>model_container</code></td><td><code>models.Model</code></td><td>The child model class type (not the instance) that this array field will contain.</td></tr><tr><td><code>model_form_class</code></td><td><code>models.forms.ModelForm</code></td><td>The child model form class type of the array model. All child models inside the array must be of the same type. Mixing different types of child models inside the embedded array is not supported. </td></tr><tr><td><code>model_form_kwargs</code></td><td><code>dict()</code></td><td>The kwargs (if any) that must be passed to the <code>forms.ModelForm</code> while instantiating it.</td></tr></tbody></table><h3 id="example">Example</h3><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">djongo</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>

<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">tagline</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">BlogForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Blog</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s1">'name'</span><span class="p">,</span> <span class="s1">'tagline'</span>
        <span class="p">)</span>

<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmailField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">AuthorForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Author</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s1">'name'</span><span class="p">,</span> <span class="s1">'email'</span>
        <span class="p">)</span>

<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">blog</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmbeddedField</span><span class="p">(</span>
        <span class="n">model_container</span><span class="o">=</span><span class="n">Blog</span><span class="p">,</span>
        <span class="n">model_form_class</span><span class="o">=</span><span class="n">BlogForm</span>
    <span class="p">)</span>

    <span class="n">headline</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">authors</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ArrayField</span><span class="p">(</span>
        <span class="n">model_container</span><span class="o">=</span><span class="n">Author</span><span class="p">,</span>
        <span class="n">model_form_class</span><span class="o">=</span><span class="n">AuthorForm</span>
    <span class="p">)</span>

    <span class="n">objects</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DjongoManager</span><span class="p">()</span>
</code></pre></div><h3 id="creating-array-fields">Creating Array fields</h3><p>A Model with an Array field can be created as follows:</p><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="n">entry</span> <span class="o">=</span> <span class="n">Entry</span><span class="p">()</span>
<span class="n">entry</span><span class="o">.</span><span class="n">authors</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">'name'</span><span class="p">:</span> <span class="s1">'John'</span><span class="p">,</span> <span class="s1">'email'</span><span class="p">:</span> <span class="s1">'john@mail.com'</span><span class="p">},</span>
                <span class="p">{</span><span class="s1">'name'</span><span class="p">:</span> <span class="s1">'Paul'</span><span class="p">,</span> <span class="s1">'email'</span><span class="p">:</span> <span class="s1">'paul@mail.com'</span><span class="p">}]</span>
<span class="n">entry</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div><h3 id="querying-array-fields">Querying Array fields</h3><p>Djongo uses a mixture of Django query syntax and MongoDB query syntax. Consider a query to retrieve all entries made by the author <em>Paul</em>. Using <code>ManyToManyField</code> this requires 2 SQL queries. First selects the <code>id</code> for author Paul from the <code>author</code> table. Next, a JOIN with <code>entry_authors</code> and <code>entry</code> gives the corresponding entries. </p><p>With <code>ArrayField</code> the query reduces to a single simple query: </p><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="n">entries</span> <span class="o">=</span> <span class="n">Entry</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">authors</span><span class="o">=</span><span class="p">{</span><span class="s1">'name'</span><span class="p">:</span> <span class="s1">'Paul'</span><span class="p">})</span>
</code></pre></div><p>Djongo lets you get even more specific with your queries. To query all entries where the <em>third author is Paul</em>:</p><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="n">entries</span> <span class="o">=</span> <span class="n">Entry</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">authors</span><span class="o">=</span><span class="p">{</span><span class="s1">'2.name'</span><span class="p">:</span> <span class="s1">'Paul'</span><span class="p">})</span>
</code></pre></div><p>Note: In MongoDB the first element in the array starts at index 0.</p><h2 id="using-arrayfield-in-django-admin">Using ArrayField in Django Admin</h2><p>The official <a href="https://docs.djangoproject.com/en/2.0/topics/db/queries/">Django documentation</a> exemplifies 3 models that interact with each other: <strong>Blog, Author and Entry</strong>. This tutorial considers the same 3 models. The <code>blog</code>; <code>ForeignKey</code> of the <code>Entry</code> model was optimized in the <a href="/using-django-with-mongodb-data-fields/">other tutorial</a>, here we optimize the <code>authors</code>; <code>ManyToManyField</code>.</p><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">djongo</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">tagline</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmailField</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">blog</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Blog</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">headline</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">body_text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>
    <span class="n">mod_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>
    <span class="n">authors</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Author</span><span class="p">)</span>
    <span class="n">n_comments</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">n_pingbacks</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">rating</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">headline</span>
</code></pre></div><p>A <code>ManyToManyField</code> defines a relation wherein <em>an entry is made by several authors</em>. It also defines a relation wherein <em>an author could have made several entries</em>. Django handles this internally by <strong>creating another table</strong>, the <code>entry_authors</code> table which contains different mappings between <code>entry_id</code> and <code>author_id</code>.</p><p>Fetching an entry will require 2 SQL queries. The second query will be an expensive JOIN query across <code>entry_authors</code> and <code>authors</code>. The Model described above will work perfectly well on MongoDB as well, when you use Djongo as the connector. MongoDB however offers much more powerful ways to make such queries. These queries come at the cost of higher disk space utilization.</p><p>As a designer using Djongo, you have the freedom to continue with the above schema. Alternatively, you can define a schema having a trade off on disk space for higher performance.</p><p>Let us redefine the <code>authors</code> in the <code>Entry</code> models using the <code>ArrayField</code>:</p><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">djongo</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">tagline</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">MetaData</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>
    <span class="n">mod_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>
    <span class="n">n_pingbacks</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">rating</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmailField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">blog</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmbeddedField</span><span class="p">(</span>
        <span class="n">model_container</span><span class="o">=</span><span class="n">Blog</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">meta_data</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmbeddedField</span><span class="p">(</span>
        <span class="n">model_container</span><span class="o">=</span><span class="n">MetaData</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">headline</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">body_text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>

    <span class="n">authors</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ArrayField</span><span class="p">(</span>
        <span class="n">model_container</span><span class="o">=</span><span class="n">Author</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">n_comments</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">headline</span>
</code></pre></div><p><strong>Notice</strong> how the <code>ManyToManyField</code> is now replaced by the <code>ArrayField</code>. To display the Array field in Django Admin, a <code>Form</code> for the field must be present. Since the array is made up of abstract <code>Author</code> models, the form can be easily created by using a <code>ModelForm</code>. If you do not specify a <code>ModelForm</code> for your array models in the <code>model_form_class</code> argument, Djongo will automatically generate a <code>ModelForm</code> for you.</p><p><img alt="Array-model-field" src="/assets/images/array-model-field.png"></p><blockquote><p>Django Admin reveals multiple neatly nested <code>Name</code> and <code>Email</code> fields under a single Author label.</p></blockquote><p>Retrieving an entry from the database will result in <strong>no JOINS and only a single database lookup. It is super fast</strong></p></ng-component><!----></div><aside _ngcontent-ng-c3825049082 class="nav-sticky"><nav _ngcontent-ng-c3825049082 class="nav nav-toc"><h3 _ngcontent-ng-c3825049082><i _ngcontent-ng-c3825049082 class="fas fa-file-alt"></i> On This Page</h3><ul _ngcontent-ng-c3825049082><!----></ul></nav></aside></div></div><div _ngcontent-ng-c3552946287 id="footer" class="page__footer"><footer _ngcontent-ng-c3552946287><aside _ngcontent-ng-c3552946287 class="l-fixed-notice cookie-notice"><p _ngcontent-ng-c3552946287>We use cookies to enhance user experience. You consent to their usage by browsing this site. <button _ngcontent-ng-c3552946287 id="cookie-accept" class="btn btn--success" jsaction="click:;">Accept</button></p></aside><div _ngcontent-ng-c3552946287 class="page__footer-copyright">© 2025 Doableware AB.</div></footer></div></div></app-body></ng-component><!----></app-root>
<!--<script src="/assets/js/main.min.js"></script>-->
<script>
  window.ga = function () {
    ga.q.push(arguments)
  };
  ga.q = [];
  ga.l = +new Date;
  ga('create', 'UA-75159067-1', 'auto');
  ga('set', 'anonymizeIp', false);
  ga('send', 'pageview')
</script>
<script src="https://www.google-analytics.com/analytics.js" async></script>
<link rel="modulepreload" href="chunk-27PYSS5C.js"><script src="polyfills-EONH2QZO.js" type="module"></script><script src="main-FKZ2IASU.js" type="module"></script>
<script id="ng-state" type="application/json">{"__nghData__":[{"t":{"10":"t0"},"c":{"10":[{"i":"t0","r":1,"x":5}]}},{"t":{"0":"t21","2":"t22","3":"t23"},"c":{"0":[],"2":[{"i":"t22","r":2,"c":{"0":[{"i":"t21","r":1}]}}],"3":[]}},{},{"n":{"1":"0f2nf","4":"3fn"},"t":{"7":"t24","21":"t26"},"c":{"7":[{"i":"t24","r":1,"t":{"5":"t25"},"c":{"5":[{"i":"t25","r":1,"x":6}]}},{"i":"t24","r":1,"t":{"5":"t25"},"c":{"5":[{"i":"t25","r":1,"x":5}]}},{"i":"t24","r":1,"t":{"5":"t25"},"c":{"5":[{"i":"t25","r":1,"x":2}]}}],"13":[{"i":"c1439473956","r":1}],"21":[]}},{"c":{"0":[{"i":"c3825049082","r":1}]}}]}</script></body></html>