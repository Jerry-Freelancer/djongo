<!DOCTYPE html><html lang="en" class="no-js" data-beasties-container><head>
<meta charset="UTF-8">
<title>Indexes</title>
<meta name="description" content="Djongo is a smarter approach to database querying. It maps python objects to MongoDB documents. It is popularly referred to as an Object Document Mapper or ODM. It is an extension to the traditional Django object relational modeling framework. Use Django Admin to directly add and modify documents stored in MongoDB. Use other contrib modules such as Auth and Sessions without any changes.">
<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Djongomapper">
<meta property="og:title" content="Djongo">
<meta property="og:url" content="https://www.djongomapper.com/">
<meta property="og:description" content="Djongo is a smarter approach to database querying. It maps python objects to MongoDB documents. It is popularly referred to as an Object Document Mapper or ODM. It is an extension to the traditional Django object relational modeling framework. Use Django Admin to directly add and modify documents stored in MongoDB. Use other contrib modules such as Auth and Sessions without any changes.">
<link rel="canonical" href="https://www.djongomapper.com/">
<script type="application/ld+json">
  {
    "@context": "https://schema.org",

      "@type": "Organization",
      "name": "Doableware",
      "url": "https://www.djongomapper.com/",
      "logo": "/assets/images/djongo-symbol-small.png"
  }
</script>
<meta name="google-site-verification" content="tFNu7Nc9hzKF9v7f6kYaoMbBCNyGREchcKMVdxJuyJo">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
</noscript>
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" type="text/css" media="screen" href="/assets/css/custom.css">
<link rel="shortcut icon" href="/assets/images/favicon.ico">
<script async src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script async src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
<!--<script async src="/assets/js/cookie-consent.js"></script>-->

<script>
  if (window.location.hostname != 'localhost'){
  (function (w, d, s, l, i) {
  w[l] = w[l] || [];
  w[l].push({
    'gtm.start':
      new Date().getTime(), event: 'gtm.js'
  });
  var f = d.getElementsByTagName(s)[0],
    j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
  j.async = true;
  j.src =
    'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
  f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-T72KG6N');
  }
</script>

  <base href="/">
  <style>html{scroll-behavior:smooth}
</style><link rel="stylesheet" href="styles-TPMX36DN.css" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles-TPMX36DN.css"></noscript><style ng-app-id="ng">.body[_ngcontent-ng-c4210415865]{display:grid;grid-template-columns:minmax(min-content,calc(300px - 1rem)) minmax(600px,1280px) minmax(min-content,calc(300px - 1rem));grid-template-rows:calc(100vh - 3rem) auto;justify-content:center;gap:1rem;padding-left:1rem;padding-right:1rem}.body[_ngcontent-ng-c4210415865] > div[_ngcontent-ng-c4210415865]{grid-row:1/-1}.body[_ngcontent-ng-c4210415865] > aside[_ngcontent-ng-c4210415865]{grid-row:1}.nav[_ngcontent-ng-c4210415865]{padding-top:1rem;padding-bottom:1rem;font-size:.7rem}.nav-sticky[_ngcontent-ng-c4210415865]{position:sticky;top:3rem;overflow:auto}.nav-side[_ngcontent-ng-c4210415865]   h3[_ngcontent-ng-c4210415865]{font-size:.7rem;opacity:.7;text-transform:uppercase;border-bottom:1px solid #f2f3f3;margin:.5rem 0;padding:.25rem 0}.nav-side[_ngcontent-ng-c4210415865]   a[_ngcontent-ng-c4210415865]{color:inherit;opacity:.7}.nav-side[_ngcontent-ng-c4210415865]   .active[_ngcontent-ng-c4210415865]{font-weight:700;opacity:1}.nav-side[_ngcontent-ng-c4210415865]   a[_ngcontent-ng-c4210415865]:hover{opacity:1}.nav-toc[_ngcontent-ng-c4210415865]   h3[_ngcontent-ng-c4210415865]{font-size:.75rem;font-weight:700;color:#fff;background:#6f777d;border-top-left-radius:4px;border-top-right-radius:4px;padding:.5rem .75rem;margin:0}.nav-toc[_ngcontent-ng-c4210415865]   a[_ngcontent-ng-c4210415865]{display:block;padding:.25rem .75rem;color:#646769;font-weight:700;line-height:1.5;border-bottom:1px solid #f2f3f3;border-left:1px solid #f2f3f3;border-right:1px solid #f2f3f3}.nav-toc[_ngcontent-ng-c4210415865]   a[_ngcontent-ng-c4210415865]:hover{text-decoration:underline}.nav-toc[_ngcontent-ng-c4210415865]   li[_ngcontent-ng-c4210415865]   li[_ngcontent-ng-c4210415865] > a[_ngcontent-ng-c4210415865]{font-weight:400;padding-left:1rem}.nav-toc[_ngcontent-ng-c4210415865]   .active[_ngcontent-ng-c4210415865]{background-color:#e2e4e5}.sidebar[_ngcontent-ng-c4210415865]{opacity:1}.sidebar[_ngcontent-ng-c4210415865]   li[_ngcontent-ng-c4210415865]{font-size:.7rem}.page__content[_ngcontent-ng-c4210415865]{margin-top:1em}</style></head>
  <body><!--nghm--><script type="text/javascript" id="ng-event-dispatch-contract">(()=>{function p(t,n,r,o,e,i,f,m){return{eventType:t,event:n,targetElement:r,eic:o,timeStamp:e,eia:i,eirp:f,eiack:m}}function u(t){let n=[],r=e=>{n.push(e)};return{c:t,q:n,et:[],etc:[],d:r,h:e=>{r(p(e.type,e,e.target,t,Date.now()))}}}function s(t,n,r){for(let o=0;o<n.length;o++){let e=n[o];(r?t.etc:t.et).push(e),t.c.addEventListener(e,t.h,r)}}function c(t,n,r,o,e=window){let i=u(t);e._ejsas||(e._ejsas={}),e._ejsas[n]=i,s(i,r),s(i,o,!0)}window.__jsaction_bootstrap=c;})();
</script><script>window.__jsaction_bootstrap(document.body,"ng",["click"],[]);</script>
  <app-root ng-version="19.2.0" ngh="2" ng-server-context="ssg"><router-outlet></router-outlet><ng-component _nghost-ng-c4210415865 ngh="1"><app-body _ngcontent-ng-c4210415865 ngh="0"><div class="layout--splash"><nav class="skip-links"><ul><li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li><li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li><li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li></ul></nav><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><nav id="site-nav" class="greedy-nav"><a href="/" class="site-logo"><img src="/assets/images/djongo-symbol-small.png" alt="Djongo"></a><a href="/" class="site-title"> Djongo </a><ul class="visible-links"><li class="masthead__menu-item"><a href="/djongocs/login/">Login</a></li><li class="masthead__menu-item"><a href="/djongocs/contact-us/">Contact Us</a></li><li class="masthead__menu-item"><a href="/app-development/">Services</a></li><li class="masthead__menu-item"><a href="/products/">Products</a></li><li class="masthead__menu-item"><a href="/docs/get-started/">Docs</a></li></ul><button type="button" class="greedy-nav__toggle hidden"><span class="visually-hidden">Toggle Menu</span><div class="navicon"></div></button><ul class="hidden-links hidden"></ul></nav></div></div></div><div class="initial-content"><div _ngcontent-ng-c4210415865 class="body"><aside _ngcontent-ng-c4210415865 class="nav-sticky"><nav _ngcontent-ng-c4210415865 class="nav nav-side"><ul _ngcontent-ng-c4210415865><li _ngcontent-ng-c4210415865><h3 _ngcontent-ng-c4210415865>Djongo</h3><ul _ngcontent-ng-c4210415865><li _ngcontent-ng-c4210415865><a _ngcontent-ng-c4210415865 routerlinkactive="active" href="/docs/get-started" class jsaction="click:;"> Get Started </a></li><li _ngcontent-ng-c4210415865><a _ngcontent-ng-c4210415865 routerlinkactive="active" href="/docs/integrating-django-with-mongodb" class jsaction="click:;"> Django with MongoDB </a></li><li _ngcontent-ng-c4210415865><a _ngcontent-ng-c4210415865 routerlinkactive="active" href="/docs/using-django-with-mongodb-data-fields" class jsaction="click:;"> Embedded Field </a></li><li _ngcontent-ng-c4210415865><a _ngcontent-ng-c4210415865 routerlinkactive="active" href="/docs/using-django-with-mongodb-array-field" class jsaction="click:;"> Array Field </a></li><li _ngcontent-ng-c4210415865><a _ngcontent-ng-c4210415865 routerlinkactive="active" href="/docs/using-django-with-mongodb-array-reference-field" class jsaction="click:;"> Array Reference Field </a></li><li _ngcontent-ng-c4210415865><a _ngcontent-ng-c4210415865 routerlinkactive="active" href="/docs/using-django-with-other-fields" class jsaction="click:;"> Other Fields </a></li><!----></ul></li><li _ngcontent-ng-c4210415865><h3 _ngcontent-ng-c4210415865>DjongoCS</h3><ul _ngcontent-ng-c4210415865><li _ngcontent-ng-c4210415865><a _ngcontent-ng-c4210415865 routerlinkactive="active" href="/docs/indexes" class="active" jsaction="click:;"> Indexes </a></li><li _ngcontent-ng-c4210415865><a _ngcontent-ng-c4210415865 routerlinkactive="active" href="/docs/model-query" class jsaction="click:;"> Model Query </a></li><li _ngcontent-ng-c4210415865><a _ngcontent-ng-c4210415865 routerlinkactive="active" href="/docs/model-creation" class jsaction="click:;"> Model Creation </a></li><li _ngcontent-ng-c4210415865><a _ngcontent-ng-c4210415865 routerlinkactive="active" href="/docs/model-update" class jsaction="click:;"> Model Update </a></li><li _ngcontent-ng-c4210415865><a _ngcontent-ng-c4210415865 routerlinkactive="active" href="/docs/database-transactions" class jsaction="click:;"> Database Transactions </a></li><!----></ul></li><li _ngcontent-ng-c4210415865><h3 _ngcontent-ng-c4210415865>Side Stuff</h3><ul _ngcontent-ng-c4210415865><li _ngcontent-ng-c4210415865><a _ngcontent-ng-c4210415865 routerlinkactive="active" href="/docs/djongo-comparison" class jsaction="click:;"> Djongo vs Others </a></li><li _ngcontent-ng-c4210415865><a _ngcontent-ng-c4210415865 routerlinkactive="active" href="/docs/django-mongodb-connector-design-document" class jsaction="click:;"> Djongo Design </a></li><!----></ul></li><!----></ul></nav></aside><div _ngcontent-ng-c4210415865 class="page__content"><header _ngcontent-ng-c4210415865><h1 _ngcontent-ng-c4210415865 class="page__title">Indexes</h1></header><router-outlet _ngcontent-ng-c4210415865></router-outlet><ng-component ngh="0"><h2 id="compound-index">Compound Index</h2><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CompoundIndex</span><span class="p">(</span>
    <span class="n">fields</span><span class="o">=</span><span class="p">(),</span>
    <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">background</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">partialFilterExpression</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">sparse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">collation</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div><h3 id="arguments">Arguments</h3><table><thead><tr><th>Argument</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>fields</code></td><td><code>Tuple</code> or <code>List</code></td><td>A tuple of strings containing the fields to be indexed. Adding a '-' before the field name, builds the index in the <a href="https://docs.djangoproject.com/en/dev/ref/models/indexes/#django.db.models.Index.fields">descending order</a>.</td></tr><tr><td><code>name</code></td><td><code>string</code></td><td>The index name, if not provided will be autogenerated by MongoDB</td></tr><tr><td><code>unique</code></td><td><code>boolean</code></td><td>Used to create <a href="https://docs.mongodb.com/manual/core/index-unique/">unique indexes</a></td></tr><tr><td><code>background</code></td><td><code>boolean</code></td><td>Create the index in the background.</td></tr><tr><td><code>partialFilterExpression</code></td><td><code>Q</code></td><td>Used to create <a href="https://docs.mongodb.com/manual/core/index-partial/">partial indexes</a>. Similar to Django <a href="https://docs.djangoproject.com/en/dev/ref/models/indexes/#condition">Index condition</a>. Takes an instance of <a href="https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.Q">Q</a> to build the filter expression.</td></tr><tr><td><code>sparse</code></td><td><code>boolean</code></td><td>Used to create <a href="https://docs.mongodb.com/manual/core/index-sparse/">sparse indexes</a></td></tr><tr><td><code>collation</code></td><td><code>Collation</code></td><td>Used to specify the <a href="https://docs.mongodb.com/manual/reference/collation/">collation</a>. Takes an instance of <a href="https://api.mongodb.com/python/current/api/pymongo/collation.html">collation</a></td></tr></tbody></table><h3 id="example">Example</h3><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">djongo.models.indexes</span> <span class="kn">import</span> <span class="n">CompoundIndex</span>
<span class="kn">from</span> <span class="nn">djongo</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">tagline</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">CompoundIndex</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'-tagline'</span><span class="p">])</span>
        <span class="p">]</span>
</code></pre></div><p>Generates the pymongo command:</p><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="n">db</span><span class="o">.</span><span class="n">blog</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span> <span class="p">{</span> <span class="s1">'name'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'tagline'</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}</span> <span class="p">)</span>
</code></pre></div><h2 id="text-index">Text Index</h2><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">TextIndex</span><span class="p">(</span>
    <span class="n">fields</span><span class="o">=</span><span class="p">(),</span>
    <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">background</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">partialFilterExpression</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">default_language</span><span class="o">=</span><span class="s1">'english'</span><span class="p">,</span> 
    <span class="n">language_override</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">textIndexVersion</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div><h3 id="example_1">Example</h3><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">djongo.models.indexes</span> <span class="kn">import</span> <span class="n">TextIndex</span>
<span class="kn">from</span> <span class="nn">djongo</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">tagline</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TextIndex</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'tagline'</span><span class="p">])</span>
        <span class="p">]</span>
</code></pre></div><p>Generates the pymongo command:</p><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="n">db</span><span class="o">.</span><span class="n">blog</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span> <span class="p">{</span> <span class="s1">'name'</span><span class="p">:</span> <span class="s1">'text'</span><span class="p">,</span> <span class="s1">'tagline'</span><span class="p">:</span> <span class="s1">'text'</span> <span class="p">}</span> <span class="p">)</span>
</code></pre></div><h2 id="wildcard-index">Wildcard Index</h2><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">WildcardIndex</span><span class="p">(</span>
    <span class="n">fields</span><span class="o">=</span><span class="p">(),</span>
    <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">background</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">partialFilterExpression</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">sparse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">collation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">wildcardProjection</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div><h3 id="example_2">Example</h3><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">djongo.models.indexes</span> <span class="kn">import</span> <span class="n">WildcardIndex</span>
<span class="kn">from</span> <span class="nn">djongo</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">tagline</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">blog</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmbeddedField</span><span class="p">(</span>
        <span class="n">model_container</span><span class="o">=</span><span class="n">Blog</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">WildcardIndex</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">'blog'</span><span class="p">])</span>
        <span class="p">]</span>
</code></pre></div><p>Generates the pymongo command:</p><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="n">db</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span> <span class="p">{</span> <span class="s1">'blog.$**'</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">)</span>
</code></pre></div><h2 id="2dsphere-index">2dsphere Index</h2><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">TwoDSphereIndex</span><span class="p">(</span>
    <span class="n">fields</span><span class="o">=</span><span class="p">(),</span>
    <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">background</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">partialFilterExpression</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">sparse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">collation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="nb">min</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="nb">max</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div><h3 id="example_3">Example</h3><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">djongo.models.indexes</span> <span class="kn">import</span> <span class="n">TwoDSphereIndex</span>
<span class="kn">from</span> <span class="nn">djongo</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Location</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ArrayField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">loc</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmbeddedField</span><span class="p">(</span>
        <span class="n">model_container</span><span class="o">=</span><span class="n">Location</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TwoDSphereIndex</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">'loc'</span><span class="p">])</span>
        <span class="p">]</span>
</code></pre></div><p>Generates the pymongo command:</p><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="n">db</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span> <span class="p">{</span> <span class="s1">'loc'</span> <span class="p">:</span> <span class="s1">'2dsphere'</span> <span class="p">}</span> <span class="p">)</span>
</code></pre></div><h2 id="hashed-index">Hashed Index</h2><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">HashedIndex</span><span class="p">(</span>
    <span class="n">fields</span><span class="o">=</span><span class="p">(),</span>
    <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">background</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">partialFilterExpression</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">sparse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">collation</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div><h3 id="example_4">Example</h3><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">djongo.models.indexes</span> <span class="kn">import</span> <span class="n">HashedIndex</span>
<span class="kn">from</span> <span class="nn">djongo</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">tagline</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">HashedIndex</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">'name'</span><span class="p">])</span>
        <span class="p">]</span>
</code></pre></div><p>Generates the pymongo command:</p><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="n">db</span><span class="o">.</span><span class="n">blog</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span> <span class="p">{</span> <span class="s1">'name'</span><span class="p">:</span> <span class="s1">'hashed'</span> <span class="p">}</span> <span class="p">)</span>
</code></pre></div><h2 id="ttl-index">TTL Index</h2><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">TTLIndex</span><span class="p">(</span>
    <span class="n">field</span><span class="o">=</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">background</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">partialFilterExpression</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">sparse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">collation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">expireAfterSeconds</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div><h3 id="example_5">Example</h3><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">djongo.models.indexes</span> <span class="kn">import</span> <span class="n">TTLIndex</span>
<span class="kn">from</span> <span class="nn">djongo</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">TTLIndex</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s1">'pub_date'</span><span class="p">,</span> <span class="n">expireAfterSeconds</span><span class="o">=</span><span class="mi">3600</span><span class="p">)</span>
        <span class="p">]</span>
</code></pre></div><p>Generates the pymongo command:</p><div class="highlighter-rouge highlight codehilite"><pre><span></span><code><span class="n">db</span><span class="o">.</span><span class="n">blog</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span> <span class="p">{</span> <span class="s1">'pub_date'</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="n">expireAfterSeconds</span><span class="o">=</span><span class="mi">3600</span> <span class="p">)</span>
</code></pre></div></ng-component><!----></div><aside _ngcontent-ng-c4210415865 class="nav-sticky"><nav _ngcontent-ng-c4210415865 class="nav nav-toc"><h3 _ngcontent-ng-c4210415865><i _ngcontent-ng-c4210415865 class="fas fa-file-alt"></i> On This Page</h3><ul _ngcontent-ng-c4210415865><!----></ul></nav></aside></div></div><div id="footer" class="page__footer"><footer><aside class="l-fixed-notice cookie-notice"><p>We use cookies to enhance user experience. You consent to their usage by browsing this site. <button id="cookie-accept" class="btn btn--success" jsaction="click:;">Accept</button></p></aside><div class="page__footer-copyright">© 2025 Doableware AB.</div></footer></div></div></app-body></ng-component><!----></app-root>
<!--<script src="/assets/js/main.min.js"></script>-->
<script>
  window.ga = function () {
    ga.q.push(arguments)
  };
  ga.q = [];
  ga.l = +new Date;
  ga('create', 'UA-75159067-1', 'auto');
  ga('set', 'anonymizeIp', false);
  ga('send', 'pageview')
</script>
<script src="https://www.google-analytics.com/analytics.js" async></script>  <link rel="modulepreload" href="chunk-27PYSS5C.js"><script src="polyfills-EONH2QZO.js" type="module"></script><script src="main-6KJRTQAE.js" type="module"></script>
<script id="ng-state" type="application/json">{"__nghData__":[{},{"n":{"1":"0f2n2f"},"t":{"6":"t14","20":"t16"},"c":{"6":[{"i":"t14","r":1,"t":{"5":"t15"},"c":{"5":[{"i":"t15","r":1,"x":6}]}},{"i":"t14","r":1,"t":{"5":"t15"},"c":{"5":[{"i":"t15","r":1,"x":5}]}},{"i":"t14","r":1,"t":{"5":"t15"},"c":{"5":[{"i":"t15","r":1,"x":2}]}}],"12":[{"i":"c1505930812","r":1}],"20":[]}},{"c":{"0":[{"i":"c4210415865","r":1}]}}]}</script></body></html>